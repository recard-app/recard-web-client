@use '../globals' as *;

// =============================================================================
// CARDZEN THEME OVERRIDES
// Scoped under [data-theme="cardzen"] -- cannot affect Default theme.
// All values use SCSS variables (-> CSS custom properties) from ThemeColors,
// so if the Cardzen palette changes, these overrides adapt automatically.
// =============================================================================

// --- shadcn/ui CSS variable overrides ---
// Override the oklch defaults in main.css :root with Cardzen dark values.
// :root[data-theme] gives specificity 0-2-0, beating :root (0-1-0).
:root[data-theme="cardzen"] {
  --background: #{$neutral-light-gray};
  --foreground: #{$neutral-black};
  --card: #{$neutral-white};
  --card-foreground: #{$neutral-black};
  --popover: #{$dropdown-white};
  --popover-foreground: #{$neutral-black};
  --primary: #{$primary-color};
  --primary-foreground: #{$neutral-white};
  --secondary: #{$neutral-lightest-gray};
  --secondary-foreground: #{$neutral-black};
  --muted: #{$neutral-lightest-gray};
  --muted-foreground: #{$neutral-dark-gray};
  --accent: #{$primary-light};
  --accent-foreground: #{$neutral-black};
  --destructive: #{$error};
  --border: #{$neutral-gray};
  --input: #{$neutral-gray};
  --ring: #{$primary-color};
}

// --- Component-specific overrides ---

[data-theme="cardzen"] {
  // Chat component cards -- pop against dark container background
  .chat-component-item {
    background-color: $background-lighter-gray;
    border-color: $border-medium-gray;

    // Action row footer -- lighter than card body for visual distinction.
    .action-row {
      background-color: $border-lighter-gray;
      border-top-color: $neutral-gray;
    }
  }

  // User message bubble -- bright gold text on dark gold bg.
  // Needs .prompt-history to beat component specificity (0-4-0 vs 0-3-0).
  .prompt-history .entry-user .entry-content {
    color: $primary-color;
  }

  // Drawer content -- use card surface, not page canvas
  [data-slot="drawer-content"] {
    background-color: $neutral-white !important;
  }

  // Drawer handle -- visible against card surface
  [data-slot="drawer-handle"] {
    background: $neutral-gray;
  }

  // Credit modal bottom-row button -- override light tint that mixes toward white.
  // In dark mode, mix toward the dark surface color instead.
  .credit-modal-bottom-row button.outline {
    background-color: color-mix(in srgb, currentColor 15%, $neutral-white) !important;

    &:hover:not(:disabled) {
      background-color: color-mix(in srgb, currentColor 25%, $neutral-white) !important;
    }
  }

  // History panel section titles (time period labels) -- brighten for dark bg.
  // $neutral-dark-gray is readable but user wants these labels to pop more.
  .history-panel .section-title {
    color: $neutral-black;
  }

  // Credit detail values -- brighten to primary text so they stand out from
  // the muted labels ($neutral-medium-gray).
  .credit-detail-value {
    color: $neutral-black;
  }

  // Credit period row -- brighten period name and dollar amount.
  .credit-period-row .period-name,
  .amount-display .amount-text {
    color: $neutral-black;
  }

  // Card detail meta icons (issuer/network) -- $neutral-gray (#484848) is a
  // border color, far too dark for icons on dark surfaces.
  // SVG fill/stroke are set as attributes, so we need !important on each.
  .meta-item .meta-icon {
    color: $neutral-dark-gray !important;
    stroke: $neutral-dark-gray !important;
    fill: $neutral-dark-gray !important;
  }

  // Navigation icons (inactive/gray) -- brighten for visibility on dark sidebar.
  // Only targets non-active icons; gold active icons are left alone.
  // Outline icons use stroke; solid icons use fill. Override both selectively.
  .mini-nav-icon:not(.active) svg {
    stroke: $neutral-dark-gray !important;

    &[fill]:not([fill="none"]) {
      fill: $neutral-dark-gray !important;
    }
  }

  // Sidebar item icons (expanded sidebar) -- SVG has .sidebar-item-icon class directly.
  svg.sidebar-item-icon {
    stroke: $neutral-dark-gray !important;

    &[fill]:not([fill="none"]) {
      fill: $neutral-dark-gray !important;
    }
  }

  // Card selector items -- elevate above drawer/container surface for contrast.
  // neutralWhite (#1C1C1C) matches the drawer bg, so bump to neutralLightestGray (#272727)
  // and use a visible border (borderLightGray #484848 vs neutralLightGray #0D0D0D).
  .credit-card-selector .card,
  .single-card-selector .cards-container .selectable-card {
    background-color: $neutral-lightest-gray;
    border-color: $border-light-gray;
  }

  // Sonner toast notifications -- warm dark palette instead of pure black.
  [data-sonner-toaster] {
    --normal-bg: #{$neutral-lightest-gray};
    --normal-bg-hover: #{$neutral-gray};
    --normal-border: #{$neutral-gray};
    --normal-border-hover: #{$neutral-dark-gray};
    --normal-text: #{$neutral-black};

    --success-bg: hsl(150, 30%, 10%);
    --success-border: hsl(147, 30%, 20%);
    --success-text: #{$success};

    --error-bg: hsl(358, 30%, 12%);
    --error-border: hsl(357, 30%, 22%);
    --error-text: #{$error};

    --warning-bg: hsl(30, 30%, 10%);
    --warning-border: hsl(30, 30%, 20%);
    --warning-text: #{$warning};

    --info-bg: hsl(210, 30%, 10%);
    --info-border: hsl(210, 25%, 20%);
    --info-text: #{$info};
  }

  // Sidebar credit names -- match card name brightness ($neutral-black)
  // instead of the default $neutral-dark-gray which is too muted on dark bg.
  .credit-entry-sidebar .credit-title-row .credit-name {
    color: $neutral-black;
  }

  // Credit summary hero -- bump each text element up one brightness notch.
  // hero-value "$32": $neutral-dark-gray -> $neutral-black (match credit-name)
  // hero-label "of monthly credits used": $neutral-medium-gray -> $neutral-dark-gray
  // supporting-row: $neutral-dark-gray -> $neutral-black
  .credit-summary-hero .hero-value-row .hero-value {
    color: $neutral-black;
  }

  .credit-summary-hero .hero-value-row .hero-label {
    color: $neutral-dark-gray;
  }

  .credit-summary-hero .supporting-row {
    color: $neutral-dark-gray;

    .supporting-value {
      color: $neutral-black;
    }
  }
}
