@use '../../styling/globals' as *;

.history-panel {
    .history-section {
        display: flex;
        margin-bottom: $space-6;
        gap: $space-4;
        align-items: flex-start;
        //max-width: 1000px;

        .section-header {
            flex-shrink: 0;
            width: 120px;
            position: sticky;
            top: 0;
            
            .section-title {
                font-family: $font-inter;
                font-size: $font-xs;
                font-weight: $font-bold;
                color: $neutral-dark-gray;
                padding: $space-1 0;
                margin: 0;
                text-align: right;
                line-height: $leading-normal;
                text-transform: uppercase;
                @media (max-width: $mobile-breakpoint) {
                  color: $neutral-medium-gray;
                }
            }
        }


    }

  .section-entries {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: $space-1;
  }

    // Apply these styles only when viewing full history
    &.full-history {
        display: flex;
        flex-direction: column;
        height: 100%;
        max-height: calc(var(--app-vh, 1vh) * 100);
        background-color: $neutral-lightest-gray;
        box-sizing: border-box;
        min-height: 0; // Critical for nested flex scrolling

        .history-panel-content {
            flex: 1;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            min-height: 0;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
            padding: $space-5;
            
            // Center the content area
            max-width: 1000px;
            width: 100%;
            margin-left: auto;
            margin-right: auto;

            // Universal scrollbar styling
            @include universal-scrollbar;

            @media (max-width: $mobile-breakpoint) {
              padding: $space-2;
            }

            // Loading and empty state messages
            > p {
                @include body-regular;
                text-align: center;
                color: $neutral-dark-gray;
                margin: $space-8 0;
                flex-shrink: 0;
            }
        }

        .history-panel-footer {
            .pagination-controls {
                max-width: 1200px;
                width: 90%;
            }

          // shadcn pagination: force link text color to our primary-medium
          .history-pagination {
              [data-slot="pagination-link"] {
                  color: $primary-medium !important;
                  @include hover {
                      color: $primary-medium !important;
                  }
                  svg {
                      color: inherit;
                  }
              }
          }
        }
    }
}

// Mobile sidebar variant tweaks
@media (max-width: $mobile-breakpoint) {
  .mobile-drawer-content .history-panel {
    .timestamp,
    .selected-card-display {
      display: none !important;
    }

    .entry-title {
      font-size: $font-sm;
    }
  }

  // Stack section header above entries on mobile for the full history page
  .history-panel {
    .history-section {
      flex-direction: column;
      gap: $space-1;
      align-items: stretch;
      margin-bottom: $space-2;

      .section-header {
        position: static;
        top: auto;
        width: 100%;

        .section-title {
          text-align: left;
          padding: 0;
          margin: 0;
        }
      }
    }

    &.full-history {
      .history-panel-content {
        padding: $space-3;
      }
    }
  }
}

// Adjust pagination controls styling for the sticky footer
.pagination-controls {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: $space-2;
  margin: 0;
  padding: 0;

  .pagination-numbers {
    display: flex;
    gap: $space-1;
  }

  button {
    @include button-outline;

    & {
      min-width: 36px;
      padding: $space-2 $space-3 !important;
      font-size: $font-sm;
      border-width: $border-full !important;
      box-sizing: border-box;
    }
    
    &.pagination-number {
      &.active {
        @include button-primary;

        & {
          padding: $space-2 $space-3 !important;
          border-width: $border-full !important;
        }
      }
    }

    &.pagination-edge-button,
    &.pagination-nav-button {
      font-weight: $font-semibold;
      padding: $space-2 $space-3 !important;
    }
    
    &:focus,
    &:active {
      padding: $space-2 $space-3 !important;
      border-width: $border-full !important;
    }
  }
}