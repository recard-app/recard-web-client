@use '../../../styling/globals' as *;

// Universal drawer handle
[data-slot="drawer-handle"] {
  width: 48px;
  height: 6px;
  border-radius: $radius-full;
  background: $neutral-light-gray;
  margin: $space-2 auto;
  flex-shrink: 0;
  min-height: 6px;
  min-width: 48px;
}

// Provide a bit more top spacing when the drawer opens from bottom
[data-slot="drawer-content"][data-vaul-drawer-direction="bottom"] > [data-slot="drawer-handle"],
[data-slot="drawer-content"][data-vaul-drawer-direction="top"] > [data-slot="drawer-handle"] {
  margin-top: $space-3;
}

// Remove blue focus/outline from drawer content itself
[data-slot="drawer-content"],
[data-slot="drawer-content"]:focus,
[data-slot="drawer-content"]:focus-visible {
  outline: none !important;
  box-shadow: none !important;
  border: none !important;
}

// Remove focus outline from interactive elements, but preserve form field styling
[data-slot="drawer-content"] *:focus,
[data-slot="drawer-content"] *:focus-visible {
  outline: none !important;
}

// Preserve border and box-shadow for form inputs on focus
[data-slot="drawer-content"] input:focus,
[data-slot="drawer-content"] input:focus-visible,
[data-slot="drawer-content"] textarea:focus,
[data-slot="drawer-content"] textarea:focus-visible,
[data-slot="drawer-content"] select:focus,
[data-slot="drawer-content"] select:focus-visible {
  border: $border-full solid $neutral-medium-gray !important;
  box-shadow: $shadow-base !important;
}

// Remove any browser default focus styles from the drawer overlay as well
[data-slot="drawer-overlay"],
[data-slot="drawer-overlay"]:focus,
[data-slot="drawer-overlay"]:focus-visible {
  outline: none !important;
  box-shadow: none !important;
}

// Smooth transitions for drawer content changes
[data-slot="drawer-content"] {
  transition: height 0.3s ease-out, max-height 0.3s ease-out;
}

// Smooth transitions for content that loads asynchronously
.drawer-content-scroll,
.dialog-content-scroll {
  transition: opacity 0.2s ease-out;
}

// Add a minimum height to prevent jarring transitions when content loads
.mobile-credit-details-drawer {
  min-height: 300px;
  transition: height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

// Ensure smooth opacity transitions when content appears
.mobile-credit-details-drawer .drawer-content-scroll {
  opacity: 1;
  transition: opacity 0.3s ease-out 0.1s; // Small delay to ensure content is ready
}

// When content is loading/missing, reduce opacity slightly
.mobile-credit-details-drawer .drawer-content-scroll:empty {
  opacity: 0.5;
}

// Card detail drawer - offwhite background with gradient fade to white at top
.card-detail-drawer {
  .dialog-body {
    background-color: $neutral-lightest-gray; // Fallback
    background: linear-gradient(
      to top,
      $neutral-lightest-gray 0%,
      $neutral-lightest-gray 80%,
      $neutral-white 100%
    );
    border-radius: $radius-lg $radius-lg 0 0;
  }
}

// Selection chips in drawer header (mobile card selector)
.mobile-card-selector-drawer .drawer-sticky-header {
  .selection-chips-container {
    width: 100%;
    align-self: stretch; // Override align-items: center from parent
    padding: $space-1-5 0 0 0;
  }

  .selection-chips {
    display: flex;
    gap: $space-2;
    overflow-x: auto;
    overflow-y: hidden;
    -webkit-overflow-scrolling: touch;
    width: 100%;

    // Hide scrollbar but keep functionality
    scrollbar-width: none;
    &::-webkit-scrollbar {
      display: none;
    }
  }

  .selection-chip {
    display: inline-flex;
    align-items: center;
    gap: $space-1;
    padding: $space-1 $space-1-5 $space-1 $space-1;
    background: $neutral-light-gray;
    border: $border-full solid $neutral-gray;
    border-radius: $radius-full;
    font-family: $font-inter;
    font-size: $font-xs;
    font-weight: $font-medium;
    color: $neutral-dark-gray;
    white-space: nowrap;
    flex-shrink: 0;

    // All icons in chip (star icon and card icon) should not shrink
    > svg {
      flex-shrink: 0;
    }

    // Card name text
    &__name {
      max-width: 100px;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    // Preferred card chip variant
    &--preferred {
      background: $primary-lightest;
      border-color: $primary-light;
      color: $primary-medium;
    }
  }
}