@use '../../styling/globals' as *;

// Universal content wrapper styles for all pages
.universal-content-wrapper {
  flex: 1;
  min-height: 0;
  transition: margin-left $side-panel-speed ease-in-out;

  // White background variant for pages that need it
  &.white-background {
    background-color: $neutral-white;
  }
  
  // Default behavior: apply sidebar margins
  &:not(.no-sidebar-margin) {
    &.side-panel-open {
      margin-left: $side-panel-width;
    }
    
    &.side-panel-closed {
      margin-left: $mini-sidebar-width;
    }
  }
  
  // No margin when explicitly disabled
  &.no-sidebar-margin {
    margin-left: 0;
  }

  // Center content utility variant for simple pages (e.g., auth)
  &.center-content {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: $space-6 $space-4;
  }

  // Auth pages gradient background with primary color blobs
  &.auth-background {
    background:
      radial-gradient(ellipse at 20% 20%, rgba($primary-light, 0.5) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 80%, rgba($primary-color, 0.3) 0%, transparent 50%),
      radial-gradient(ellipse at 60% 10%, rgba($primary-light, 0.25) 0%, transparent 40%),
      $neutral-white;
  }

  // Full height variant for pages like prompt window that need viewport height
  &.full-height {
    height: 100%;
    overflow: hidden; // Prevent scrolling at this level
    display: flex;
    flex-direction: column;

    // For home page content (app-content inside wrapper)
    .app-content {
      display: flex;
      flex: 1;
      min-height: 0;
      height: 100%;
      position: relative;
      
      &.side-panel-open .prompt-window-container,
      &.side-panel-closed .prompt-window-container {
        margin-left: 0;
      }
    }
  }

  // Default behavior for regular pages (scrollable)
  &:not(.full-height) {
    // Fill the remaining space beneath the header within the flex column app shell
    min-height: 100%;
    overflow-y: auto;
  }
}

// Mobile responsiveness: remove left offset when viewport is under $mobile-breakpoint
@media (max-width: $mobile-breakpoint) {
  .universal-content-wrapper {
    margin-left: 0 !important;

    &.side-panel-open,
    &.side-panel-closed {
      margin-left: 0 !important;
    }

    &.full-height {
      .app-content {
        // Ensure nested content containers don't assume any sidebar gap
        &.side-panel-open .prompt-window-container,
        &.side-panel-closed .prompt-window-container {
          margin-left: 0 !important;
        }
      }
    }
  }
}
